# Lab Writeup: Finding and exploiting an unused API endpoint

URL: https://portswigger.net/web-security/learning-paths/api-testing/api-testing-identifying-and-interacting-with-api-endpoints/api-testing/lab-exploiting-unused-api-endpoint

## Description

To solve the lab, exploit a hidden API endpoint to buy a Lightweight l33t Leather Jacket. You can log in to your own account using the following credentials: `wiener:peter`.

## Solution

1. Go to "l33t Leather Jacket" then add to cart 1 product, intercept the request

   ![unused-apis](/assets/unused-apis.png)

   Send the above request to repeater

2. Change the request method to `OPTIONS` then you'll get the following response:

   ![unused-apis-1](/assets/unused-apis-1.png)

   From the above response, we know that we could do `PATCH` method other than `GET`

3. Change the request to `PATCH` add `Content-Type: application/json` then body

   ```
    {"price":0,"message":"&#x1F525; Don't delay, purchase yours today! 2 people are watching this item! &#x1F525;"}
   ```

   Here's the response:

   ![unused-apis-2](/assets/unused-apis-2.png)

4. Go back again to "L33t Leather Jacket" then add to cart

5. Login as `wiener:peter`, go to cart and click "add to cart" then the lab should be solved.

   ![unused-apis-3](/assets/unused-apis-3.png)
